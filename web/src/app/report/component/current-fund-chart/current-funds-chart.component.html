<common-layout class="funds" *ifHasData="currentFund != null">
  @for (entry of currentFund!.entries; track entry.account.id) {
    <h4 class="account">{{entry.account.name}}</h4>
    <div class="revised">
        <span *ngIf="entry.account.reviseDate"
              [matTooltip]="entry.account.reviseDate"
              [class.warn]="reviseDateAgo(entry.account.reviseDate) > 14">{{reviseDateAgo(entry.account.reviseDate)}} days ago</span>
    </div>
    @for (amountEntry of entry.amounts; track amountEntry.amount.currency) {
      <amount-label [amount]="amountEntry.amount"></amount-label>
      <amount-label [amount]="amountEntry.commonAmount" class="common-amount"
                    *ngIf="amountEntry.commonAmount.currency != amountEntry.amount.currency"></amount-label>
      <div *ngIf="amountEntry.commonAmount.currency == amountEntry.amount.currency"></div>
      <div class="bar" matRipple (click)="drillDown(entry, amountEntry)"
           [style.width]="amountRelativeWidth(amountEntry.commonAmount) + '%'"
           [style.margin-left]="amountRelativeOffset(amountEntry.commonAmount) + '%'"></div>
    }
  }
</common-layout>
