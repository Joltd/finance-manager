<mat-expansion-panel>
  <mat-expansion-panel-header>
    <mat-panel-title>Settings</mat-panel-title>
  </mat-expansion-panel-header>

  <form [formGroup]="filter()">

    <mat-form-field>
      <mat-label>From</mat-label>
      <input formControlName="dateFrom" matInput [matDatepicker]="from" readonly (click)="from.open()">
      <mat-datepicker touchUi #from></mat-datepicker>
    </mat-form-field>

    <mat-form-field>
      <mat-label>To</mat-label>
      <input formControlName="dateTo" matInput [matDatepicker]="to" readonly (click)="to.open()">
      <mat-datepicker touchUi #to></mat-datepicker>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Group by</mat-label>
      <mat-select formControlName="groupBy">
        <mat-option [value]="'expense'">Expense</mat-option>
        <mat-option [value]="'income'">Income</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Expenses</mat-label>
      <mat-select formControlName="expenseCategories" multiple>
        <mat-option *ngFor="let expenseCategory of expenseCategories" [value]="expenseCategory.id">{{expenseCategory.name}}</mat-option>
      </mat-select>
      <button matSuffix mat-icon-button (click)="allExpenseCategories()"><mat-icon>checklist</mat-icon></button>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Incomes</mat-label>
      <mat-select formControlName="incomeCategories" multiple>
        <mat-option *ngFor="let incomeCategory of incomeCategories" [value]="incomeCategory.id">{{incomeCategory.name}}</mat-option>
      </mat-select>
      <button matSuffix mat-icon-button (click)="allIncomeCategories()"><mat-icon>checklist</mat-icon></button>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Currency</mat-label>
      <currency-input formControlName="currency"></currency-input>
    </mat-form-field>

  </form>
</mat-expansion-panel>

<mat-card>
  <mat-card-content>
    <div *ngFor="let total of totals">{{total.category}}: {{total.amount}}</div>
  </mat-card-content>
</mat-card>

<mat-card class="chart-card">
  <mat-card-content>
    <div #chart class="chart"></div>
  </mat-card-content>
</mat-card>
